<div class="row">
  <div class="col-lg-12 top10 tdzty">
    <h3 class="poloklh4">修改场地资料</h3>

    <div class="top15 clearfix row">
      <div class="col-lg-9 col-md-9">
        <div class="panel panel-default">
          <div class="panel-body">
            <h4 class="polk">基本资料</h4>
            <%= form_tag(update_profile_path) do |f| %>
                <div class="top15">
                  <div class="form-section top15">
                    <label class="input-label">服务号名称</label>
                    <%= text_field_tag(:name, @service.profile.name, class: 'input-text') %>
                  </div>
                  <div class="form-section top15">
                    <input type="hidden" name="interests" value="<%= @service.profile.interests %>">
                    <input id="display_interests " class="input-letext" data-toggle="modal " data-target="#myModal" placeholder="健身服务" value="<%= @service.profile.interests_string %>" readonly>
                  </div>
                  <div class="form-section top15">
                    <input type="checkbox" name="service[]" value="1"/>停车
                    <input type="checkbox" name="service[]" value="2"/>WIFI
                    <input type="checkbox" name="service[]" value="3"/>淋浴
                    <input type="checkbox" name="service[]" value="4"/>餐饮
                  </div>
                  <div class="row top15">
                    <div class="col-md-4">
                      <div class="form-section">
                        <select class="input-textl" name="province">
                        </select>
                      </div>
                    </div>
                    <div class="col-md-4">
                      <div class="form-section">
                        <select class="input-textl" name="city">
                        </select>
                      </div>
                    </div>
                    <div class="col-md-4">
                      <div class="form-section">
                        <select class="input-textl" name="area">
                        </select>
                      </div>
                    </div>
                  </div>
                  <div class="form-section top15">
                    <label class="input-label">详细地址</label>
                    <input class="input-text" type="text" name="address">
                  </div>
                  <div class="form-section top15">
                    <label class="input-label">联系电话</label>
                    <input class="input-text" type="text" name="mobile">
                  </div>

                  <div class="form-section top15">
                    <label class="input-label">简介</label>
                    <textarea class="input-text form-controth top5" rows="3" name="signature"></textarea>
                  </div>
                  <div class="fygroup">
                    <button type="submit" class="btntn-lg ">确认</button>
                  </div>
                </div>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div id="myModal" class="modal hide fade tlodl" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header modal-body lLabetlx">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel" class="ltbetlx">健身服务</h3>
  </div>
  <div class="modal-body">
    <% INTERESTS['items'].collect { |item| %>
        <label class="checkbox-inline roccll">
          <input name="interest<%= %>" type="checkbox" value="<%= item['id'] %>" text="<%= item['name'] %>"><%= item['name'] %>
        </label>
    <% } %>
  </div>
  <div class="modal-footer">
    <button type="button" class="btntn-lg" onclick="choose_interest()">确认</button>
  </div>
</div>

<script>
    new PCAS("province", "city", "area");
    $('#service').multiselect({
        buttonClass: 'btn',
        buttonWidth: 'auto',
        buttonText: function (options) {
            if (options.length > 6) {
                return options.length + 'selected';
            }
            else {
                var selected = '';
                options.each(function () {
                    selected += $(this).text() + ', ';
                });
                return selected.substr(0, selected.length - 2);
            }
        }
    });

    function choose_interest() {
        var interests = document.getElementsByName('interest');
        var choose_interests_text = [];
        var choose_interests_value = [];
        for (var i = 0; i < interests.length; i++) {
            if (interests[i].checked) {
                choose_interests_value.push(interests[i].value);
                choose_interests_text.push(interests[i].getAttribute('text'));
            }
        }
        $('#interests').val(choose_interests_value.join(','));
        $('#display_interests').val(choose_interests_text.join(','));
        $('#myModal').modal('hide');
    }

</script>