<script>
    $(function () {
        $('.modal').on('show.bs.modal', function (e) {
            alert($(e.relatedTarget).data('data-type'));
        })
    })
</script>
<table class="table table-striped" id="datatable-editable">
  <thead>
  <tr class="table-header">
    <th width="5%">编码</th>
    <th width="25%">会员卡名称</th>
    <th width="25%">所属门店</th>
    <th width="20%">卡类</th>
    <th width="20%">余额(元/次/有效期)</th>
    <th width="5%">操作</th>
  </tr>
  </thead>
  <tbody>
  <% @cards.each do |card| %>
      <tr>
        <td><%= card.id %></td>
        <td><%= card.name %></td>
        <td><%= card.service.profile.name %></td>
        <td><%= card.card_type_i18n %></td>
        <td><%= card.value %></td>
        <td class="sign-in">
          <%= link_to "签到", "#", 'data-toggle' => 'modal', 'data-target' => '#stored', 'data-type' => card.card_type_i18n, 'data-name' => card.name %>
        </td>
      </tr>
  <% end %>
  </tbody>
</table>
<div class="modal fade sign-in-modal" id="stored" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">签到收费</h4>
      </div>
      <div class="modal-body">
        <div class="input-group top20">
          <div class="input-group-addon">请输入金额</div>
          <input type="text" class="form-control" id="exampleInputAmount" placeholder="请输入金额">

          <div class="input-group-addon">元</div>
        </div>
        <div class="fygroup top20 bottom20">
          <button type="button" class="btntn-lg ">确认</button>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="modal fade sign-in-modal" id="measured" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">签到收费</h4>
      </div>
      <div class="modal-body">
        <div class="input-group top20">
          <div class="input-group-addon">请输入金额</div>
          <input type="text" class="form-control" id="exampleInputAmount" placeholder="请输入金额">

          <div class="input-group-addon">元</div>
        </div>
        <div class="fygroup top20 bottom20">
          <button type="button" class="btntn-lg ">确认</button>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="modal fade sign-in-modal" id="clocked" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">签到收费</h4>
      </div>
      <div class="modal-body">
        <div class="input-group top20">
          <div class="input-group-addon">请输入金额</div>
          <input type="text" class="form-control" id="exampleInputAmount" placeholder="请输入金额">

          <div class="input-group-addon">元</div>
        </div>
        <div class="fygroup top20 bottom20">
          <button type="button" class="btntn-lg ">确认</button>
        </div>
      </div>
    </div>
  </div>
</div>